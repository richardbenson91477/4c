<h1>4c programming language</h1>

<p><em>Foresee: To see beforehand</em></p>

<h2>Overview</h2>

<p><strong>4c</strong> is an imperitive <em>(as opposed to functional)</em> programming language with a LISP-like syntax.<br/>
4c is designed to facilitate compilation to native machine code, rather than interpretable byte-code.</p>

<p><strong>4cc</strong> (the reference 4c compiler) compiles 4c code to GNU assembly (GAS).</p>

<p>This document describes the 4c language; its syntax and standard built-in types, functions, constants, etc.</p>

<h3>Rationale</h3>

<p>Languages that intend to improve on C while filling the same niche are currently a dime-a-dozen.</p>

<p>I believe this is a good thing. Let&rsquo;s add another.</p>

<h3>Potential benefits</h3>

<ul>
<li>Variable names specify their own types.</li>
<li>Lisp-like syntax rather than the standard &ldquo;Algol family&rdquo; syntax.</li>
</ul>


<h3>Potential drawbacks</h3>

<ul>
<li>Variable names specify their own types.</li>
<li>Lisp-like syntax rather than the standard &ldquo;Algol family&rdquo; syntax.</li>
</ul>


<h2>Syntax</h2>

<h3>Basic program structure</h3>

<p>; <strong>Comments</strong> follow semicolons</p>

<p><strong>Function calls</strong> take the following form:<br/>
(function-name <em>arg_1</em> .. <em>arg_n</em>)</p>

<p>Where</p>

<ul>
<li><em>function-name</em> specifies a built-in function or a variable of type &lsquo;:function</li>
<li><p><em>arg</em> is any of the following:</p>

<ul>
<li>an <em>inner</em> function call which returns a result to its <em>outer</em> function, e.g. (+ <strong>(+ 1 1)</strong> 2)</li>
<li>a constant (e.g. 3, &ldquo;Hello&rdquo;, &lsquo;nl)</li>
<li>a variable name</li>
</ul>
</li>
</ul>


<p><strong>Lists</strong> of values take the following form:<br/>
[<em>list-item_1 .. </em>list-item_n]</p>

<p>Where <em>list-item</em> is any of the follwing:</p>

<ul>
<li>a function call</li>
<li>a constant</li>
<li>a variable name</li>
</ul>


<p>Note: list elements are left <em>unevaluated</em> until needed, e.g. (do [x] &hellip;) does not <em>automatically</em> become (do [3] &hellip;) when x is set to 3.</p>

<h3>Constants</h3>

<p>Number constants (type &lsquo;:number):</p>

<ul>
<li> -9..9<strong>.</strong>9..9 .. 0 .. 9..9<strong>.</strong>9..9</li>
</ul>


<p>String constants (type &lsquo;:string):</p>

<ul>
<li> &ldquo;This is a string&rdquo;</li>
</ul>


<h3>Built-in constants</h3>

<p>&lsquo;nil (empty value)<br/>
'true (&rsquo;:boolean true)<br/>
&lsquo;false (&rsquo;:boolean false)<br/>
&lsquo;spc (blank-space &rsquo;:string)<br/>
&lsquo;nl (newline &rsquo;:string)</p>

<h3>Built-in type names</h3>

<p>&lsquo;:function<br/>
&rsquo;:number<br/>
&lsquo;:number-array<br/>
&rsquo;:boolean<br/>
&lsquo;:string</p>

<h3>Variables</h3>

<p>Variable names describe their own types:</p>

<ul>
<li><p><strong>_</strong>function-var<br/>
    Names beginning with underscore (_) have type &lsquo;:function.</p></li>
<li><p>number-var<br/>
    Otherwise plain names have type &lsquo;:number by default.</p></li>
<li><p>number-array-var<strong>.</strong><br/>
    Names ending with period (.) have type &lsquo;:number-array  .</p></li>
<li><p>boolean-var<strong>^</strong><br/>
    Names ending with carat (^) have type &lsquo;:boolean.</p></li>
<li><p>string-var<strong>$</strong><br/>
    Names ending with a dollar sign ($) have type &lsquo;:string.</p></li>
<li><p><strong>:</strong>type-name<br/>
    Names beginning with a colon (:) have their own type.</p></li>
<li><p><strong>:</strong>type-name<strong>:</strong>instance-name<br/>
    Names beginning with :type: have the type :type.</p></li>
<li><p><strong>:</strong>type-name<strong>:</strong>instance-name<strong>.</strong>var-instance<br/>
    Names beginning with :type-name:instance-name. are variables belonging to <em>:instance-name</em> of type <em>:type-name</em> and have their own type determined by the name <em>var-instance</em>.</p></li>
</ul>


<h2>Built-in functions</h2>

<p>(<strong>def</strong> <em>var-name</em> <em>value</em>)<br/>
description: reference <em>value</em> with the variable <em>var-name</em><br/>
returns: &lsquo;nil</p>

<p>(<strong>set</strong> <em>var-name</em> <em>value</em>)<br/>
description: assign <em>value</em> to the variable referenced by <em>var-name</em><br/>
returns: &lsquo;nil</p>

<p>(def-type :type-name [var-list]) -> &lsquo;nil<br/>
(do [arg-list] [fn-list] default-return-value) -> &rsquo;:function instance<br/>
(return value-for-do) -> &lsquo;nil<br/>
(if (&rsquo;:function->&lsquo;:boolean) [true-fn-list] [false-fn-list]) -> 'nil<br/>
(while (&rsquo;:function->&lsquo;:boolean) [fn-list] [per-loop fn-list]) -> 'nil<br/>
(print value) -> 'nil<br/>
(input) -> 'string instance<br/>
(and &rsquo;:boolean &lsquo;:boolean) -> &rsquo;:boolean<br/>
(or &lsquo;:boolean &rsquo;:boolean) -> &lsquo;:boolean<br/>
(not &rsquo;:boolean) -> &lsquo;:boolean<br/>
(+ num num) -> &rsquo;:number<br/>
(- num num) -> &lsquo;:number<br/>
(* num num) -> &rsquo;:number<br/>
(/ num num) -> &lsquo;:number<br/>
(% num num) -> &rsquo;:number<br/>
(= num num) -> &lsquo;:boolean<br/>
(!= num num) -> &rsquo;:boolean<br/>
(> num num) -> &lsquo;:boolean<br/>
(&lt; num num) -> &rsquo;:boolean<br/>
(&lt;= num num) -> &lsquo;:boolean<br/>
(>= num num) -> &rsquo;:boolean<br/>
(str-copy target-string-var source-string) -> &lsquo;:boolean<br/>
(str-from char-number) -> 'string<br/>
(str-add string string) -> 'string<br/>
(str-cmp string string) -> &rsquo;:boolean<br/>
(<strong>new</strong> :type var [extra-args]) -> &lsquo;:boolean<br/>
(def :type._new (do [:type:this extra-param-vars]<br/>
  [alloc/init :type:this.vars]<br/>
))</p>

<p>(<strong>del</strong> :type var [extra-args]) -> &lsquo;:boolean<br/>
(def :type._del (do [:type:this extra-param-vars]<br/>
  [dealloc/deinit :type:this.vars]<br/>
))</p>

<h2>Internals</h2>

<h3>&lsquo;:function type</h3>

<p>function name<br/>
function argument names and types<br/>
memory label</p>

<h3>&lsquo;:number type</h3>

<p>TODO RIGHT</p>

<h3>&lsquo;:number-array type</h3>

<p>TODO</p>

<h3>&lsquo;:string type</h3>

<p>memory address (if dynamic) or memory label (if static)
length in bytes</p>

<h3>&lsquo;:boolean type</h3>

<p>var name<br/>
truth flag</p>

<hr />

<h2>Credits</h2>

<p>Â© 2021 Richard A. Benson <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#98;&#101;&#110;&#115;&#111;&#110;&#57;&#49;&#52;&#55;&#55;&#64;&#112;&#114;&#111;&#116;&#111;&#110;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#98;&#101;&#110;&#115;&#111;&#110;&#57;&#49;&#52;&#55;&#55;&#64;&#112;&#114;&#111;&#116;&#111;&#110;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br></p>
