<h1>4c programming language</h1>

<p><em>Foresee: To see beforehand</em></p>

<h2>Overview</h2>

<p><strong>4c</strong> is an imperitive <em>(as opposed to functional)</em> programming language with a LISP-like syntax.<br/>
<strong>4cc</strong> (the 4c compiler) compiles 4c code to GNU assembly (GAS).</p>

<p>This document describes the 4c language; its syntax and standard built-in types, functions, constants, etc.</p>

<h3>Rationale</h3>

<p>Languages that intend to improve on C while filling the same niche are currently a dime-a-dozen. I believe this is a good thing. Let&rsquo;s add another.</p>

<h3>Potential benefits</h3>

<ul>
<li>Variable names specify their own types.</li>
<li>Lisp-like syntax rather than the standard &ldquo;Algol family&rdquo; syntax.</li>
</ul>


<h3>Potential down-sides</h3>

<ul>
<li>Variable names specify their own types.</li>
<li>Lisp-like syntax rather than the standard &ldquo;Algol family&rdquo; syntax.</li>
</ul>


<h2>Syntax</h2>

<h3>Basic program structure</h3>

<p>; <strong>Comments</strong> follow semicolons</p>

<p><strong>Function calls</strong> take the following form:<br/>
(function-name <em>arg_1</em> .. <em>arg_n</em>)</p>

<p>Where</p>

<ul>
<li><em>function-name</em> names a built-in function or a variable of type &lsquo;function</li>
<li><p><em>arg</em> is any of the following:</p>

<ul>
<li>an inner function call which returns a result to its outer function, e.g. (+ <strong>(+ 1 1)</strong> 2)</li>
<li>a constant (e.g. 3, &ldquo;Hello&rdquo;, &lsquo;nl)</li>
<li>a variable name</li>
</ul>
</li>
</ul>


<p><strong>Lists</strong> of values take the following form:<br/>
[<em>list-item_1 .. </em>list-item_n]</p>

<p>Where <em>list-item</em> is any of the follwing:</p>

<ul>
<li>thing1</li>
<li>thing2</li>
<li>FIXME</li>
</ul>


<h3>Constants</h3>

<p>-9..9<strong>.</strong>9..9 .. 9..9<strong>.</strong>9..9<br/>
&ldquo;string constant&rdquo;</p>

<h3>Built-in constants</h3>

<p>&lsquo;nil (empty type)<br/>
'true ('boolean with value set to true)<br/>
'false ('boolean with value set to false)<br/>
'spc (blank-space string)<br/>
'nl (newline string)</p>

<h3>Built-in type names</h3>

<p>&lsquo;function<br/>
'number<br/>
'number-array<br/>
'string <br/>
'boolean</p>

<h3>Variables</h3>

<p>_function-var<br/>
number-var<br/>
number-array-var.<br/>
boolean-var^<br/>
string-var$<br/>
:type-name<br/>
:type-name:instance-name<br/>
:type-name:instance-name.var-instance</p>

<h2>Built-in functions</h2>

<p>(<strong>def</strong> <em>var-name</em> <em>value</em>)<br/>
description: reference <em>value</em> with the variable <em>var-name</em><br/>
returns: &lsquo;nil</p>

<p>(<strong>set</strong> <em>var-name</em> <em>value</em>)<br/>
description: assign <em>value</em> to the variable referenced by <em>var-name</em><br/>
returns: &lsquo;nil</p>

<p>(def-type :type-name [var-list]) -> &lsquo;nil<br/>
(do [arg-list] [fn-list] default-return-value) -> 'function instance<br/>
(return value-for-do) -> 'nil<br/>
(if ('function->'boolean) [true-fn-list] [false-fn-list]) -> 'nil<br/>
(while ('function->'boolean) [fn-list] [per-loop fn-list]) -> 'nil<br/>
(print value) -> 'nil<br/>
(input) -> 'string instance<br/>
(and 'boolean 'boolean) -> 'boolean<br/>
(or 'boolean 'boolean) -> 'boolean<br/>
(not 'boolean) -> 'boolean<br/>
(+ num num) -> 'number<br/>
(- num num) -> 'number<br/>
(* num num) -> 'number<br/>
(/ num num) -> 'number<br/>
(% num num) -> 'number<br/>
(= num num) -> 'boolean<br/>
(!= num num) -> 'boolean<br/>
(> num num) -> 'boolean<br/>
(&lt; num num) -> 'boolean<br/>
(&lt;= num num) -> 'boolean<br/>
(>= num num) -> 'boolean<br/>
(str-copy target-string-var source-string) -> 'boolean<br/>
(str-from char-number) -> 'string<br/>
(str-add string string) -> 'string<br/>
(str-cmp string string) -> 'boolean<br/>
(<strong>new</strong> :type var [extra-args]) -> 'boolean<br/>
(def :type._new (do [:type:this extra-param-vars]<br/>
  [alloc/init :type:this.vars]<br/>
))</p>

<p>(<strong>del</strong> :type var [extra-args]) -> &lsquo;boolean<br/>
(def :type._del (do [:type:this extra-param-vars]<br/>
  [dealloc/deinit :type:this.vars]<br/>
))</p>

<h2>Internals</h2>

<h3>&lsquo;function type</h3>

<p>function name<br/>
function argument names and types<br/>
memory label</p>

<h3>&lsquo;number type</h3>

<p>TODO RIGHT</p>

<h3>&lsquo;number-array type</h3>

<p>TODO</p>

<h3>&lsquo;string type</h3>

<p>memory address (if dynamic) or memory label (if static)
length in bytes</p>

<h3>&lsquo;boolean type</h3>

<p>var name<br/>
truth flag</p>

<hr />

<h2>Credits</h2>

<p>Â© 2021 Richard A. Benson <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#98;&#101;&#110;&#115;&#111;&#110;&#57;&#49;&#52;&#55;&#55;&#64;&#112;&#114;&#111;&#116;&#111;&#110;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#98;&#101;&#110;&#115;&#111;&#110;&#57;&#49;&#52;&#55;&#55;&#64;&#112;&#114;&#111;&#116;&#111;&#110;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br></p>
